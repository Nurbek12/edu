import{a as _}from"./index-7376b9a9.js";import{r as i,u as S,a as n,o as C,c as N,w as e,b as t,f as j,d as p,t as y}from"./index-a79041d6.js";const A=p("div",{class:"d-flex justify-center"},"RUXSAT BERISH",-1),E={"data-label":"Talaba"},H={"data-label":"Kontrakt"},q={__name:"AccessToExam",setup(I){const f=[s=>!!s||"Required"],r=i([]),c=i(""),b=i([]);S();const m=i([]),a=i({group:null,exam:null}),V=[{title:"Talaba",align:"start",sortable:!1,key:"name"},{title:"Kontrakt",sortable:!1,key:"total"}],v=i([]),w=async()=>{const{data:s}=await _.get("/all/names");b.value=s.groups,m.value=s.exams},x=async()=>{if(!a.value.group||!a.value.exam)return;const{data:s}=await _.get(`/test/access/${a.value.group}/${a.value.exam}`);v.value=s},k=async()=>{if(r.value.length===0)return;const s=r.value.map(l=>(Object.assign(v.value.find(u=>u._id===l),{att:!1}),{exam:a.value.exam,group:a.value.group,test:m.value.find(u=>u._id===a.value.exam).test,student:l,status:"created"}));console.log(s),await _.post("/test/access",s)};return w(),(s,l)=>{const u=n("v-sheet"),d=n("v-col"),g=n("v-select"),U=n("v-text-field"),T=n("v-btn"),h=n("v-row"),B=n("v-data-table"),R=n("v-container");return C(),N(R,{fluid:""},{default:e(()=>[t(h,null,{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(u,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[A]),_:1})]),_:1}),t(d,{cols:"12",md:"4"},{default:e(()=>[t(u,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[t(h,null,{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(g,{modelValue:a.value.group,"onUpdate:modelValue":[l[0]||(l[0]=o=>a.value.group=o),x],label:"Guruh",rules:f,"hide-details":"",density:"comfortable",items:b.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",class:"py-0"},{default:e(()=>[t(g,{modelValue:a.value.exam,"onUpdate:modelValue":[l[1]||(l[1]=o=>a.value.exam=o),x],label:"Imtihon",density:"comfortable",rules:f,"hide-details":"",items:m.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",class:"pb-0"},{default:e(()=>[t(U,{label:"Qidirish",modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=o=>c.value=o),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12"},{default:e(()=>[t(T,{color:"primary",onClick:k,block:"",elevation:"0",disabled:r.value.length===0,height:"40px"},{default:e(()=>[j(" Ruxsat berish ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",md:"8"},{default:e(()=>[t(u,{elevation:"1",color:"surface",width:"100%",class:"py-2 px-0",rounded:""},{default:e(()=>[t(B,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=o=>r.value=o),headers:V,search:c.value,items:v.value,"items-per-page-text":"","item-value":"_id","items-per-page":"-1","item-selectable":"att","no-data-text":"Hech narsa topilmadi","show-select":"",density:"compact"},{"item.name":e(({item:o})=>[p("td",E,y(o.raw.name),1)]),"item.total":e(({item:o})=>[p("td",H,y(o.raw.total),1)]),bottom:e(()=>[]),_:1},8,["modelValue","search","items"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{q as default};
