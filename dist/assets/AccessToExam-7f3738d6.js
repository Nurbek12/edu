import{r as u,u as S,a as n,o as C,c as N,w as e,h as _,b as t,f as A,d as p,t as x}from"./index-439559a6.js";const E=p("div",{class:"d-flex justify-center"},"RUXSAT BERISH",-1),H={"data-label":"Talaba"},I={"data-label":"Kontrakt"},q={__name:"AccessToExam",setup(K){const f=[o=>!!o||"Required"],c=u([]),m=u("");u([]),S();const b=u([]),s=u(null),i=u(null),V=[{title:"Talaba",align:"start",sortable:!1,key:"name"},{title:"Kontrakt",sortable:!1,key:"total"}],v=u([]),g=async()=>{const{data:o}=await _.get("/exam/list");b.value=o},w=async()=>{if(!i.value)return;const{data:o}=await _.get(`/test/access/${i.value}/${s.value._id}`);v.value=o},k=async()=>{if(c.value.length===0)return;const o=c.value.map(l=>(Object.assign(v.value.find(r=>r._id===l),{att:!1}),{exam:s.value._id,group:i.value,test:s.value.test,student:l,status:"created",subject:s.value.subject}));c.value=[],await _.post("/test/access",o)};return g(),(o,l)=>{const r=n("v-sheet"),d=n("v-col"),h=n("v-select"),U=n("v-text-field"),j=n("v-btn"),y=n("v-row"),T=n("v-data-table"),B=n("v-container");return C(),N(B,{fluid:""},{default:e(()=>[t(y,null,{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(r,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[E]),_:1})]),_:1}),t(d,{cols:"12",md:"4"},{default:e(()=>[t(r,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[t(y,null,{default:e(()=>[t(d,{cols:"12",class:"pb-0"},{default:e(()=>[t(h,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),label:"Imtihon",density:"comfortable",rules:f,"hide-details":"",items:b.value,color:"primary","item-title":"name","return-object":"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12"},{default:e(()=>{var a;return[t(h,{modelValue:i.value,"onUpdate:modelValue":[l[1]||(l[1]=R=>i.value=R),w],label:"Guruh",rules:f,disabled:!s.value,"hide-details":"",density:"comfortable",items:((a=s.value)==null?void 0:a.groups)||[],color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","disabled","items"])]}),_:1}),t(d,{cols:"12",class:"py-0"},{default:e(()=>[t(U,{label:"Qidirish",modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=a=>m.value=a),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12"},{default:e(()=>[t(j,{color:"primary",onClick:k,block:"",elevation:"0",disabled:c.value.length===0,height:"40px"},{default:e(()=>[A(" Ruxsat berish ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",md:"8"},{default:e(()=>[t(r,{elevation:"1",color:"surface",width:"100%",class:"py-2 px-0",rounded:""},{default:e(()=>[t(T,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=a=>c.value=a),headers:V,search:m.value,items:v.value,"items-per-page-text":"","item-value":"_id","items-per-page":"-1","item-selectable":"att","no-data-text":"Hech narsa topilmadi","show-select":"",density:"compact"},{"item.name":e(({item:a})=>[p("td",H,x(a.raw.name),1)]),"item.total":e(({item:a})=>[p("td",I,x(a.raw.total),1)]),bottom:e(()=>[]),_:1},8,["modelValue","search","items"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{q as default};
