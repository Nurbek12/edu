import{a as p}from"./index-7376b9a9.js";import{r as i,u as R,a as s,o as T,c as C,w as a,b as e,f as N,d as S}from"./index-1d6c4b32.js";const j=S("div",{class:"d-flex justify-center"},"RUXSAT BERISH",-1),I={__name:"AccessToExam",setup(A){const _=[o=>!!o||"Required"],c=i([]),r=i(""),f=i([]);R();const m=i([]),t=i({group:null,exam:null}),h=[{title:"Talaba ism-familiyasi",align:"start",sortable:!1,key:"name"}],v=i([]),y=async()=>{const{data:o}=await p.get("/all/names");f.value=o.groups,m.value=o.exams},x=async()=>{if(!t.value.group||!t.value.exam)return;const{data:o}=await p.get(`/test/access/${t.value.group}/${t.value.exam}`);v.value=o},V=async()=>{if(c.value.length===0)return;const o=c.value.map(l=>(Object.assign(v.value.find(n=>n._id===l),{att:!1}),{exam:t.value.exam,group:t.value.group,test:m.value.find(n=>n._id===t.value.exam).test,student:l,status:"created"}));console.log(o),await p.post("/test/access",o)};return y(),(o,l)=>{const n=s("v-sheet"),u=s("v-col"),b=s("v-select"),w=s("v-text-field"),U=s("v-btn"),g=s("v-row"),k=s("v-data-table"),B=s("v-container");return T(),C(B,{fluid:""},{default:a(()=>[e(g,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(n,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:a(()=>[j]),_:1})]),_:1}),e(u,{cols:"12",md:"4"},{default:a(()=>[e(n,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:a(()=>[e(g,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(b,{modelValue:t.value.group,"onUpdate:modelValue":[l[0]||(l[0]=d=>t.value.group=d),x],label:"Guruh",rules:_,"hide-details":"",density:"comfortable",items:f.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12",class:"py-0"},{default:a(()=>[e(b,{modelValue:t.value.exam,"onUpdate:modelValue":[l[1]||(l[1]=d=>t.value.exam=d),x],label:"Imtihon",density:"comfortable",rules:_,"hide-details":"",items:m.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12",class:"pb-0"},{default:a(()=>[e(w,{label:"Qidirish",modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=d=>r.value=d),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(U,{color:"primary",onClick:V,block:"",elevation:"0",disabled:c.value.length===0,height:"40px"},{default:a(()=>[N(" Ruxsat berish ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"8"},{default:a(()=>[e(n,{elevation:"1",color:"surface",width:"100%",class:"py-2 px-0",rounded:""},{default:a(()=>[e(k,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=d=>c.value=d),headers:h,search:r.value,items:v.value,"items-per-page-text":"","item-value":"_id","items-per-page":"-1","item-selectable":"att","no-data-text":"Hech narsa topilmadi","show-select":"",density:"compact"},{bottom:a(()=>[]),_:1},8,["modelValue","search","items"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{I as default};
