import{r as i,u as k,a as o,o as U,c as A,w as t,h as r,b as e,f as B,d as C}from"./index-eee0caed.js";const N=C("div",{class:"d-flex justify-center"},"DAVOMAT",-1),O={__name:"Attendance",setup(T){const n=i([]),v=i([]),g=k(),p=i([]),a=i({group:null,subject:null}),h=[{title:"Talaba ism-familiyasi",align:"start",sortable:!1,key:"name"}],m=i([]),y=async()=>{const s=await Promise.all([r.get("/group/access"),r.get("/subject/access")]);v.value=s[0].data,p.value=s[1].data},_=async()=>{if(!a.value.group||!a.value.subject)return;const{data:s}=await r.get(`/attendence/id/${a.value.group}?subject=${a.value.subject}`);m.value=s},V=async()=>{if(n.value.length===0||!a.value.subject)return;const s=n.value.map(l=>(Object.assign(m.value.find(c=>c._id===l),{att:!1}),{...a.value,student:l,date:new Date().toLocaleString(),teacher:g.getters.userid}));n.value=[],await r.post("/attendence",s)};return y(),(s,l)=>{const c=o("v-sheet"),u=o("v-col"),f=o("v-select"),w=o("v-btn"),b=o("v-row"),j=o("v-data-table"),x=o("v-container");return U(),A(x,{fluid:""},{default:t(()=>[e(b,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(c,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[N]),_:1})]),_:1}),e(u,{cols:"12",md:"4"},{default:t(()=>[e(c,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[e(b,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(f,{modelValue:a.value.subject,"onUpdate:modelValue":[l[0]||(l[0]=d=>a.value.subject=d),_],label:"Fan",density:"comfortable","hide-details":"",items:p.value,color:"primary","item-title":"name","item-value":"name",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12",class:"py-0"},{default:t(()=>[e(f,{modelValue:a.value.group,"onUpdate:modelValue":[l[1]||(l[1]=d=>a.value.group=d),_],label:"Guruh",disabled:!a.value.subject,"hide-details":"",density:"comfortable",items:v.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","disabled","items"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(w,{color:"primary",onClick:V,block:"",elevation:"0",disabled:n.value.length===0,height:"40px"},{default:t(()=>[B(" Kiritish ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12",md:"8"},{default:t(()=>[e(c,{elevation:"1",color:"surface",width:"100%",class:"py-2 px-0",rounded:""},{default:t(()=>[e(j,{modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=d=>n.value=d),headers:h,items:m.value,"items-per-page-text":"","item-value":"_id","items-per-page":"-1","item-selectable":"att","no-data-text":"Hech narsa topilmadi","show-select":"",density:"compact"},{bottom:t(()=>[]),_:1},8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{O as default};
