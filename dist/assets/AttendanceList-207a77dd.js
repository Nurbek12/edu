import{a as b}from"./index-7376b9a9.js";import{s as q}from"./semesters-2992cfa7.js";import{r as d,a as r,o as B,c as N,w as e,b as t,e as A,d as i,t as _,f as D}from"./index-28b05177.js";const F=i("div",{class:"d-flex justify-center"},"Davomat",-1),H=i("div",{class:"w-100 d-flex justify-center"},"NB-lar Ro'yxati",-1),L={class:"responsive-datatable mt-2"},O={"data-label":"O'qituvchi"},$={"data-label":"Fan"},C={"data-label":"Sanasi"},G={"data-label":"Vaqti"},P={"data-label":"Holati"},E={__name:"AttendanceList",setup(R){const p=d(null),c=d(null),u=d(null),f=d([]),h=d([]),y=d([]);d([]);const g=[{title:"O'qituvchi",sortable:!1,key:"teacher"},{title:"Fan nomi",sortable:!1,key:"subject"},{title:"Sanasi",sortable:!1,key:"date"},{title:"Vaqti",sortable:!1,key:"time"},{title:"Holati",sortable:!1,key:"status"}],x=async()=>{const o=await Promise.all([b.get("/group"),b.get("/subject")]);h.value=o[0].data,y.value=o[1].data},w=async o=>{if(!u.value)return;const{data:a}=await b.get(`/attendence/user/${u.value}?${o}`);f.value=a},j=o=>{var a;delete o.title,w(new URLSearchParams(o).toString()),(a=c.value)!=null&&a.attendences&&(c.value=f.value.find(({_id:m})=>m===c.value._id))};return x(),(o,a)=>{const m=r("v-sheet"),n=r("v-col"),v=r("v-select"),V=r("v-row"),S=r("v-chip"),k=r("v-data-table"),U=r("v-container");return B(),N(U,{fluid:""},{default:e(()=>[t(V,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[t(m,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[F]),_:1})]),_:1}),t(n,{cols:"12",md:"4"},{default:e(()=>[t(m,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[t(V,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[t(v,{modelValue:u.value,"onUpdate:modelValue":[a[0]||(a[0]=s=>u.value=s),a[1]||(a[1]=s=>w(""))],label:"Guruh","hide-details":"",density:"comfortable",items:h.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",class:"pt-0"},{default:e(()=>[t(v,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s),label:"O'quvchi","hide-details":"",density:"comfortable",items:f.value,color:"primary","item-title":"name","return-object":"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",class:"pt-0"},{default:e(()=>[t(v,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=s=>p.value=s),label:"Fan",density:"comfortable","hide-details":"",clearable:"",items:y.value,color:"primary","clear-icon":"mdi-close","item-title":"name","item-value":"name",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",class:"pt-0"},{default:e(()=>[t(v,{label:"Semestr",disabled:!u.value,"onUpdate:modelValue":j,"hide-details":"",items:A(q),density:"compact",color:"primary","item-title":"title","return-object":"",variant:"outlined"},null,8,["disabled","items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",md:"8"},{default:e(()=>[t(m,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>{var s;return[H,i("div",L,[t(k,{"no-data-text":"Hech narsa topilmadi",density:"compact","items-per-page-text":"","items-per-page":"-1",headers:g,search:p.value,items:((s=c.value)==null?void 0:s.attendences)||[]},{"item.teacher":e(({item:l})=>[i("td",O,_(l.raw.teacher),1)]),"item.subject":e(({item:l})=>[i("td",$,_(l.raw.subject),1)]),"item.date":e(({item:l})=>[i("td",C,_(l.raw.date),1)]),"item.time":e(({item:l})=>[i("td",G,_(l.raw.time),1)]),"item.status":e(({item:l})=>[i("td",P,[t(S,{color:l.raw.status?"blue":"red",label:"",variant:"elevated"},{default:e(()=>[D(_(l.raw.status?"Sababli":"Sababsiz"),1)]),_:2},1032,["color"])])]),bottom:e(()=>[]),_:1},8,["search","items"])])]}),_:1})]),_:1})]),_:1})]),_:1})}}};export{E as default};
