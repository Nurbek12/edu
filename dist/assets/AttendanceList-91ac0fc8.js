import{r,a as i,o as q,c as B,w as e,h as b,b as t,e as N,d,t as v,f as A}from"./index-eee0caed.js";import{s as D}from"./semesters-2992cfa7.js";const F=d("div",{class:"d-flex justify-center"},"Davomat",-1),H=d("div",{class:"w-100 d-flex justify-center"},"NB-lar Ro'yxati",-1),L={class:"responsive-datatable mt-2"},O={"data-label":"O'qituvchi"},$={"data-label":"Fan"},C={"data-label":"Vaqti"},G={"data-label":"Holati"},z={__name:"AttendanceList",setup(P){const p=r(null),c=r(null),u=r(null),f=r([]),h=r([]),y=r([]),g=[{title:"O'qituvchi",sortable:!1,key:"teacher"},{title:"Fan nomi",sortable:!1,key:"subject"},{title:"Vaqti",sortable:!1,key:"date"},{title:"Holati",sortable:!1,key:"status"}],x=async()=>{const s=await Promise.all([b.get("/group"),b.get("/subject")]);h.value=s[0].data,y.value=s[1].data},w=async s=>{if(!u.value)return;const{data:a}=await b.get(`/attendence/user/${u.value}?${s}`);f.value=a},j=s=>{var a;delete s.title,w(new URLSearchParams(s).toString()),(a=c.value)!=null&&a.attendences&&(c.value=f.value.find(({_id:m})=>m===c.value._id))};return x(),(s,a)=>{const m=i("v-sheet"),n=i("v-col"),_=i("v-select"),V=i("v-row"),k=i("v-chip"),S=i("v-data-table"),U=i("v-container");return q(),B(U,{fluid:""},{default:e(()=>[t(V,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[t(m,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[F]),_:1})]),_:1}),t(n,{cols:"12",md:"4"},{default:e(()=>[t(m,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[t(V,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[t(_,{modelValue:u.value,"onUpdate:modelValue":[a[0]||(a[0]=l=>u.value=l),a[1]||(a[1]=l=>w(""))],label:"Guruh","hide-details":"",density:"comfortable",items:h.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",class:"pt-0"},{default:e(()=>[t(_,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=l=>c.value=l),label:"O'quvchi","hide-details":"",density:"comfortable",items:f.value,color:"primary","item-title":"name","return-object":"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",class:"pt-0"},{default:e(()=>[t(_,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=l=>p.value=l),label:"Fan",density:"comfortable","hide-details":"",clearable:"",items:y.value,color:"primary","clear-icon":"mdi-close","item-title":"name","item-value":"name",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",class:"pt-0"},{default:e(()=>[t(_,{label:"Semestr",disabled:!u.value,"onUpdate:modelValue":j,"hide-details":"",items:N(D),density:"compact",color:"primary","item-title":"title","return-object":"",variant:"outlined"},null,8,["disabled","items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",md:"8"},{default:e(()=>[t(m,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>{var l;return[H,d("div",L,[t(S,{"no-data-text":"Hech narsa topilmadi",density:"compact","items-per-page-text":"","items-per-page":"-1",headers:g,search:p.value,items:((l=c.value)==null?void 0:l.attendences)||[]},{"item.teacher":e(({item:o})=>[d("td",O,v(o.raw.teacher),1)]),"item.subject":e(({item:o})=>[d("td",$,v(o.raw.subject),1)]),"item.date":e(({item:o})=>[d("td",C,v(o.raw.date),1)]),"item.status":e(({item:o})=>[d("td",G,[t(k,{color:o.raw.status?"blue":"red",label:"",variant:"elevated"},{default:e(()=>[A(v(o.raw.status?"Sababli":"Sababsiz"),1)]),_:2},1032,["color"])])]),bottom:e(()=>[]),_:1},8,["search","items"])])]}),_:1})]),_:1})]),_:1})]),_:1})}}};export{z as default};
