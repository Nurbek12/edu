import{r as d,l as W,m as N,a as o,o as X,c as Z,w as e,h as b,b as a,f as _,d as s,t as i,e as ee,n as U}from"./index-439559a6.js";const ae={class:"responsive-datatable"},te={"data-label":"T/r"},le={"data-label":"Fan nomi"},se={"data-label":"Talabalar soni"},oe={"data-label":"Boshqarish"},ne={class:"d-flex justify-end align-center"},ie=s("div",null,"Hech narsa topilmadi",-1),de={class:"text-h5"},ue={class:"responsive-datatable"},re={"data-label":"T/r"},ce={"data-label":"Ism familiyasi"},_e={"data-label":"Login"},me={"data-label":"Paroli"},ve={"data-label":"Telefoni"},fe={"data-label":"Tugilgan sanasi"},pe=s("div",null,"Hech narsa topilmadi",-1),ge={__name:"Groups",setup(he){const H=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Guruh Nomi",key:"name"},{title:"Talabalar soni",key:"users"},{title:"Boshqarish",key:"actions",sortable:!1}],L=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Ism familiyasi",key:"name"},{title:"Login",key:"login"},{title:"Paroli",key:"password"},{title:"Telefoni",key:"phone"},{title:"Tugilgan sanasi",key:"birthdate"}],P=[l=>!!l||"Required"],g=d(""),u=d([]),k=d([]),x=d(null),m=d(!1),p=d(!1),r=d(-1),h=d(-1),c=d({name:""}),S={name:""},D=W(()=>r.value===-1?"Guruh Yaratish":"Guruhni O'zgartirish");N(m,l=>l||y()),N(p,l=>l||T());const F=async()=>{const{data:l}=await b.get("/group?users=1");u.value=l},Q=async()=>{const{valid:l}=await x.value.validate();l&&J()},R=async l=>{const{data:n}=await b.get(`/user/student?group=${l}`);k.value=n,p.value=!0},Y=l=>{r.value=u.value.indexOf(l),h.value=l._id,c.value=Object.assign({},l),m.value=!0},A=l=>{r.value=u.value.indexOf(l),c.value=Object.assign({},l),h.value=l._id,confirm("Ushbu malumotni o'chirmoqchimisiz?")?E():y()},E=async()=>{const{data:l}=await b.delete(`/group/${h.value}`);l&&(u.value.splice(r.value,1),y())},y=()=>{m.value=!1,U(()=>{var l;c.value=Object.assign({},S),h.value=-1,r.value=-1,(l=x.value)==null||l.reset()})},T=()=>{p.value=!1,U(()=>{k.value=[]})},J=async()=>{if(r.value>-1){const{data:l}=await b.put(`/group/${h.value}`,c.value);Object.assign(u.value[r.value],l)}else{const{data:l}=await b.post("/group",c.value);u.value.push({...l,users:0})}y()};return F(),(l,n)=>{const C=o("v-text-field"),v=o("v-col"),f=o("v-btn"),V=o("v-row"),I=o("v-sheet"),w=o("v-icon"),z=o("v-data-table"),j=o("v-card-title"),K=o("v-form"),G=o("v-container"),O=o("v-card-text"),$=o("v-card"),q=o("v-dialog"),M=o("v-spacer");return X(),Z(G,{fluid:""},{default:e(()=>[a(V,null,{default:e(()=>[a(v,{cols:"12"},{default:e(()=>[a(I,{elevation:"1",color:"surface",width:"100%",class:"pa-2 py-4",rounded:""},{default:e(()=>[a(V,{justify:"space-between"},{default:e(()=>[a(v,{cols:"12",class:"py-1",sm:"4"},{default:e(()=>[a(C,{label:"Qidirish",modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=t=>g.value=t),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),a(v,{class:"py-1",cols:"12",sm:"4",md:"3"},{default:e(()=>[a(f,{block:"",height:"42",color:"primary",onClick:n[1]||(n[1]=t=>m.value=!0),variant:"flat"},{default:e(()=>[_("Guruh yaratish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{cols:"12"},{default:e(()=>[a(I,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[s("div",ae,[a(z,{"items-per-page-text":"",headers:H,search:g.value,items:u.value},{"item.no":e(({index:t})=>[s("td",te,i(t+1)+".",1)]),"item.name":e(({item:t})=>[s("td",le,i(t.raw.name),1)]),"item.users":e(({item:t})=>[s("td",se,i(t.raw.users),1)]),"item.actions":e(({item:t})=>[s("td",oe,[s("div",ne,[a(f,{variant:"flat",size:"30",color:"primary",onClick:B=>R(t.raw._id)},{default:e(()=>[a(w,null,{default:e(()=>[_("mdi-list-box")]),_:1})]),_:2},1032,["onClick"]),a(f,{variant:"flat",size:"30",class:"ml-1",color:"primary",onClick:B=>Y(t.raw)},{default:e(()=>[a(w,null,{default:e(()=>[_("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),a(f,{variant:"flat",size:"30",class:"ml-1",color:"primary",onClick:B=>A(t.raw)},{default:e(()=>[a(w,null,{default:e(()=>[_("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])])]),"no-data":e(()=>[ie]),_:1},8,["search","items"])])]),_:1})]),_:1})]),_:1}),a(q,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=t=>m.value=t),"max-width":"550px"},{default:e(()=>[a($,null,{default:e(()=>[a(j,{class:"mt-2 ml-2 mb-0"},{default:e(()=>[s("span",de,i(ee(D)),1)]),_:1}),a(O,{class:"px-2 pt-0"},{default:e(()=>[a(G,null,{default:e(()=>[a(K,{ref_key:"form",ref:x},{default:e(()=>[a(V,null,{default:e(()=>[a(v,{cols:"12"},{default:e(()=>[a(C,{modelValue:c.value.name,"onUpdate:modelValue":n[2]||(n[2]=t=>c.value.name=t),label:"Guruh Nomi","hide-details":"",rules:P,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(v,{cols:"12"},{default:e(()=>[a(f,{variant:"flat",color:"primary",block:"",onClick:Q,height:"45"},{default:e(()=>[_(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(q,{modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=t=>p.value=t)},{default:e(()=>[a($,null,{default:e(()=>[a(j,{class:"text-h6 d-flex justify-space-between align-center"},{default:e(()=>[_(" Guruhdagi o'quvchilar ruytati "),a(M),a(f,{size:"30",color:"primary",onClick:T},{default:e(()=>[a(w,{size:"small"},{default:e(()=>[_("mdi-close")]),_:1})]),_:1})]),_:1}),a(O,{class:"px-2"},{default:e(()=>[s("div",ue,[a(z,{"items-per-page-text":"","items-per-page":"-1",headers:L,search:g.value,items:k.value},{"item.no":e(({index:t})=>[s("td",re,i(t+1)+".",1)]),"item.name":e(({item:t})=>[s("td",ce,i(t.raw.name),1)]),bottom:e(()=>[]),"item.login":e(({item:t})=>[s("td",_e,i(t.raw.login),1)]),"item.password":e(({item:t})=>[s("td",me,i(t.raw.password),1)]),"item.phone":e(({item:t})=>[s("td",ve,i(t.raw.phone),1)]),"item.birthdate":e(({item:t})=>[s("td",fe,i(t.raw.birthdate),1)]),"no-data":e(()=>[pe]),_:1},8,["search","items"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{ge as default};
