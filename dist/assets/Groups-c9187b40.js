import{a as g}from"./index-7376b9a9.js";import{r as i,l as ee,m as $,a as n,o as ae,c as te,w as e,b as a,f as v,d as o,t as d,e as le,p as j}from"./index-6f11c559.js";const oe={class:"responsive-datatable"},se={"data-label":"T/r"},ne={"data-label":"Fan nomi"},ie={"data-label":"Talabalar soni"},de={"data-label":"Boshqarish"},ue={class:"d-flex justify-end"},re=o("div",null,"Hech narsa topilmadi",-1),ce={class:"text-h5"},_e={class:"responsive-datatable"},ve={"data-label":"T/r"},me={"data-label":"Ism familiyasi"},pe={"data-label":"Guruhi"},fe={"data-label":"Login"},he={"data-label":"Paroli"},be={"data-label":"Telefoni"},ge={"data-label":"Tugilgan sanasi"},we=o("div",null,"Hech narsa topilmadi",-1),Ve={__name:"Groups",setup(ye){const P=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Guruh Nomi",key:"name"},{title:"Talabalar soni",key:"users"},{title:"Boshqarish",key:"actions",sortable:!1}],S=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Ism familiyasi",key:"name"},{title:"Guruhi",key:"group"},{title:"Login",key:"login"},{title:"Paroli",key:"password"},{title:"Telefoni",key:"phone"},{title:"Tugilgan sanasi",key:"birthdate"}],F=[l=>!!l||"Required"],w=i(""),u=i([]),x=i([]),y=i(null),m=i(!1),h=i(!1),b=i(!1),r=i(-1),p=i(-1),c=i({name:""}),q={name:""},Q=ee(()=>r.value===-1?"Guruh Yaratish":"Guruhni O'zgartirish");$(m,l=>l||z()),$(h,l=>l||V()),$(b,l=>l||B());const R=async()=>{const{data:l}=await g.get("/group?users=1");u.value=l},A=async()=>{const{valid:l}=await y.value.validate();l&&W()},E=async l=>{const{data:s}=await g.get(`/user/student?group=${l}`);x.value=s,b.value=!0},J=l=>{r.value=u.value.indexOf(l),p.value=l._id,c.value=Object.assign({},l),m.value=!0},K=l=>{r.value=u.value.indexOf(l),c.value=Object.assign({},l),p.value=l._id,h.value=!0},M=async()=>{const{data:l}=await g.delete(`/group/${p.value}`);l&&(u.value.splice(r.value,1),V())},z=()=>{m.value=!1,j(()=>{var l;c.value=Object.assign({},q),p.value=-1,r.value=-1,(l=y.value)==null||l.reset()})},V=()=>{h.value=!1,j(()=>{var l;c.value=Object.assign({},q),p.value=-1,r.value=-1,(l=y.value)==null||l.reset()})},B=()=>{b.value=!1,j(()=>{x.value=[]})},W=async()=>{if(r.value>-1){const{data:l}=await g.put(`/group/${p.value}`,c.value);Object.assign(u.value[r.value],l)}else{const{data:l}=await g.post("/group",c.value);u.value.push(l)}z()};return R(),(l,s)=>{const N=n("v-text-field"),f=n("v-col"),_=n("v-btn"),C=n("v-row"),T=n("v-sheet"),D=n("v-data-table"),I=n("v-card-title"),X=n("v-form"),H=n("v-container"),Y=n("v-card-text"),G=n("v-card"),O=n("v-dialog"),U=n("v-spacer"),L=n("v-card-actions"),Z=n("v-select");return ae(),te(H,{fluid:""},{default:e(()=>[a(C,null,{default:e(()=>[a(f,{cols:"12"},{default:e(()=>[a(T,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[a(C,{justify:"space-between"},{default:e(()=>[a(f,{cols:"12",sm:"4"},{default:e(()=>[a(N,{label:"Qidirish",modelValue:w.value,"onUpdate:modelValue":s[0]||(s[0]=t=>w.value=t),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",sm:"4",md:"3"},{default:e(()=>[a(_,{block:"",color:"primary",onClick:s[1]||(s[1]=t=>m.value=!0),variant:"tonal"},{default:e(()=>[v("Guruh yaratish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{cols:"12"},{default:e(()=>[a(T,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[o("div",oe,[a(D,{headers:P,search:w.value,items:u.value},{"item.no":e(({index:t})=>[o("td",se,d(t+1)+".",1)]),"item.name":e(({item:t})=>[o("td",ne,d(t.raw.name),1)]),"item.users":e(({item:t})=>[o("td",ie,d(t.raw.users),1)]),"item.actions":e(({item:t})=>[o("td",de,[o("div",ue,[a(_,{icon:"mdi-list-box",variant:"text",size:"40",color:"primary",onClick:k=>E(t.raw._id)},null,8,["onClick"]),a(_,{icon:"mdi-pencil",variant:"text",size:"40",color:"primary",onClick:k=>J(t.raw)},null,8,["onClick"]),a(_,{icon:"mdi-delete",variant:"text",size:"40",color:"primary",onClick:k=>K(t.raw)},null,8,["onClick"])])])]),"no-data":e(()=>[re]),_:1},8,["search","items"])])]),_:1})]),_:1})]),_:1}),a(O,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t),"max-width":"550px"},{default:e(()=>[a(G,null,{default:e(()=>[a(I,{class:"mt-2 ml-2 mb-0"},{default:e(()=>[o("span",ce,d(le(Q)),1)]),_:1}),a(Y,{class:"px-2 pt-0"},{default:e(()=>[a(H,null,{default:e(()=>[a(X,{ref_key:"form",ref:y},{default:e(()=>[a(C,null,{default:e(()=>[a(f,{cols:"12"},{default:e(()=>[a(N,{modelValue:c.value.name,"onUpdate:modelValue":s[2]||(s[2]=t=>c.value.name=t),label:"Guruh Nomi","hide-details":"",rules:F,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12"},{default:e(()=>[a(_,{variant:"tonal",color:"primary",block:"",onClick:A,height:"45"},{default:e(()=>[v(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(O,{modelValue:h.value,"onUpdate:modelValue":s[4]||(s[4]=t=>h.value=t),"max-width":"500px"},{default:e(()=>[a(G,null,{default:e(()=>[a(I,{class:"text-h6"},{default:e(()=>[v(" Ushbu ma'lumotni ochirmoqchimisiz ")]),_:1}),a(L,null,{default:e(()=>[a(U),a(_,{color:"blue-darken-1",variant:"text",onClick:V},{default:e(()=>[v(" Yo'q ")]),_:1}),a(_,{color:"blue-darken-1",variant:"text",onClick:M},{default:e(()=>[v(" Ha ")]),_:1}),a(U)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(O,{modelValue:b.value,"onUpdate:modelValue":s[6]||(s[6]=t=>b.value=t)},{default:e(()=>[a(G,null,{default:e(()=>[a(I,{class:"text-h6"},{default:e(()=>[v(" Guruhdagi o'quvchilar ruytati ")]),_:1}),a(Y,null,{default:e(()=>[a(T,{elevation:"1",color:"surface",width:"100%",rounded:""},{default:e(()=>[o("div",_e,[a(D,{density:"compact",headers:S,search:w.value,items:x.value},{"item.no":e(({index:t})=>[o("td",ve,d(t+1)+".",1)]),"item.name":e(({item:t})=>[o("td",me,d(t.raw.name),1)]),"item.group":e(({item:t})=>[o("td",pe,[a(Z,{items:u.value,readonly:"",chips:"","item-value":"_id","item-title":"name",variant:"solo","hide-details":"",flat:"",modelValue:t.raw.group,"onUpdate:modelValue":k=>t.raw.group=k},null,8,["items","modelValue","onUpdate:modelValue"])])]),"item.login":e(({item:t})=>[o("td",fe,d(t.raw.login),1)]),"item.password":e(({item:t})=>[o("td",he,d(t.raw.password),1)]),"item.phone":e(({item:t})=>[o("td",be,d(t.raw.phone),1)]),"item.birthdate":e(({item:t})=>[o("td",ge,d(t.raw.birthdate),1)]),"no-data":e(()=>[we]),_:1},8,["search","items"])])]),_:1})]),_:1}),a(L,null,{default:e(()=>[a(U),a(_,{variant:"text",onClick:s[5]||(s[5]=t=>B())},{default:e(()=>[v(" Yopish ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{Ve as default};
