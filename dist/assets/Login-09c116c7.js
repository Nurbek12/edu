import{a as C}from"./index-7376b9a9.js";import{u as I,r as c,a,o as L,c as j,w as t,b as e,f as m}from"./index-28b05177.js";const A={__name:"Login",setup(S){const i=I(),s=c(!1),d=[o=>!!o||"Required"],u=c(null),l=c({login:"",password:""}),v=async()=>{var n;const{data:o}=await C.post("/auth/login",{login:l.value.login,password:l.value.password});if(console.log(o),o.success)switch(i.commit("setUser",o.user),i.commit("setToken",o.token),localStorage.setItem("logintime",Date.now()),o.user.role){case"admin":window.location.href="/admin";break;case"student":localStorage.setItem("start_year",((n=o.user)==null?void 0:n.start_year)||2023),window.location.href="/";break;case"inspector":window.location.href="/inspector";break;case"sa":window.location.href="/secret";break;case"teacher":window.location.href="/teacher";break;case"dean":window.location.href="/dean";break;case"accountant":window.location.href="/accountant";break;case"director":window.location.href="/director";break}else Object.assign(l.value,{login:"",password:""})},w=async()=>{const{valid:o}=await u.value.validate();o&&v()};return(o,n)=>{const g=a("v-card-title"),_=a("v-text-field"),p=a("v-col"),f=a("v-row"),h=a("v-card-text"),b=a("v-btn"),k=a("v-card-actions"),x=a("v-form"),y=a("v-card"),V=a("v-container");return L(),j(V,{fluid:"",class:"bg-img py-0"},{default:t(()=>[e(f,{justify:"center",style:{height:"100vh"},align:"center"},{default:t(()=>[e(y,{"max-width":"450px",width:"100%",elevation:"2",class:"px-5 pt-10 pb-10"},{default:t(()=>[e(g,{class:"d-flex justify-center mt-3"},{default:t(()=>[m("PAYARIQ MED-KOLLEJ")]),_:1}),e(x,{ref_key:"form",ref:u},{default:t(()=>[e(h,null,{default:t(()=>[e(f,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(_,{modelValue:l.value.login,"onUpdate:modelValue":n[0]||(n[0]=r=>l.value.login=r),label:"Login","hide-details":"",rules:d,variant:"solo"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:t(()=>[e(_,{modelValue:l.value.password,"onUpdate:modelValue":n[1]||(n[1]=r=>l.value.password=r),label:"Parol","hide-details":"",autocomplete:"off",rules:d,variant:"solo","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",type:s.value?"text":"password","onClick:appendInner":n[2]||(n[2]=r=>s.value=!s.value)},null,8,["modelValue","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(k,{class:"px-4"},{default:t(()=>[e(b,{color:"primary",height:"48",variant:"elevated",block:"",onClick:w},{default:t(()=>[m("Tizimga kirish")]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{A as default};
