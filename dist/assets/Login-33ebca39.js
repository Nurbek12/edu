import{u as N,g as O,r as c,a as t,o as y,c as x,w as o,b as e,f as d,k as R,h as U,v as z}from"./index-868e85fe.js";const Y={__name:"Login",setup(A){const u=N(),w=O(),s=c(!1),_=[a=>!!a||"Required"],p=c(null),v=c(!1),l=c({login:"",password:""}),k=async()=>{const{data:a}=await U.post("/auth/login",{login:l.value.login,password:l.value.password});a.success?(u.commit("setUser",a.user),u.commit("setToken",a.token),z(),w.push("/"+a.user.role)):(Object.assign(l.value,{login:"",password:""}),v.value=!0)},h=async()=>{const{valid:a}=await p.value.validate();a&&k()};return(a,n)=>{const b=t("v-img"),V=t("v-avatar"),i=t("v-card-text"),T=t("v-card-title"),m=t("v-text-field"),f=t("v-col"),g=t("v-row"),j=t("v-btn"),C=t("v-card-actions"),I=t("v-form"),L=t("v-card"),B=t("v-container");return y(),x(B,{fluid:"",class:"bg-img py-0 h-100"},{default:o(()=>[e(g,{class:"h-100",justify:"center",align:"center"},{default:o(()=>[e(L,{"max-width":"400px",width:"100%",elevation:"2",class:"px-1 py-4"},{default:o(()=>[e(i,{class:"d-flex justify-center pb-0 pt-1"},{default:o(()=>[e(V,{rounded:"",size:"200"},{default:o(()=>[e(b,{src:"/logo.png"})]),_:1})]),_:1}),e(T,{class:"d-flex justify-center"},{default:o(()=>[d("PAYARIQ TIBBIYOT KOLLEJI")]),_:1}),v.value?(y(),x(i,{key:0,class:"d-flex justify-center text-red-lighten-1 pb-1"},{default:o(()=>[d("Login yoki parol xato!")]),_:1})):R("",!0),e(I,{ref_key:"form",ref:p},{default:o(()=>[e(i,null,{default:o(()=>[e(g,null,{default:o(()=>[e(f,{cols:"12",class:"py-2"},{default:o(()=>[e(m,{modelValue:l.value.login,"onUpdate:modelValue":n[0]||(n[0]=r=>l.value.login=r),label:"Login","hide-details":"",color:"primary",rules:_,variant:"solo"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",class:"py-2"},{default:o(()=>[e(m,{modelValue:l.value.password,"onUpdate:modelValue":n[1]||(n[1]=r=>l.value.password=r),label:"Parol","hide-details":"",autocomplete:"off",rules:_,color:"primary",variant:"solo","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",type:s.value?"text":"password","onClick:appendInner":n[2]||(n[2]=r=>s.value=!s.value)},null,8,["modelValue","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(C,{class:"px-4 py-1"},{default:o(()=>[e(j,{color:"primary",height:"48",variant:"elevated",block:"",onClick:h},{default:o(()=>[d("Tizimga kirish")]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{Y as default};
