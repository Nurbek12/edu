import{a as C}from"./index-7376b9a9.js";import{u as L,r,a,o as j,c as I,w as o,b as e,f as v}from"./index-e60ab6e1.js";const B={__name:"Login",setup(T){const i=L(),s=r(!1),d=[t=>!!t||"Required"],u=r(null),n=r({login:"",password:""}),f=async()=>{const{data:t}=await C.post("/auth/login",{login:n.value.login,password:n.value.password});if(console.log(t),t.success)switch(i.commit("setUser",t.user),i.commit("setToken",t.token),localStorage.setItem("logintime",Date.now()),t.user.role){case"admin":window.location.href="/admin";break;case"student":window.location.href="/";break;case"inspector":window.location.href="/inspector";break;case"sa":window.location.href="/secret";break;case"teacher":window.location.href="/teacher";break;case"dean":window.location.href="/dean";break;case"accountant":window.location.href="/accountant";break}else Object.assign(n.value,{login:"",password:""})},w=async()=>{const{valid:t}=await u.value.validate();t&&f()};return(t,l)=>{const g=a("v-card-title"),_=a("v-text-field"),p=a("v-col"),m=a("v-row"),h=a("v-card-text"),b=a("v-btn"),k=a("v-card-actions"),x=a("v-form"),y=a("v-card"),V=a("v-container");return j(),I(V,{fluid:"",class:"bg-img py-0"},{default:o(()=>[e(m,{justify:"center",style:{height:"100vh"},align:"center"},{default:o(()=>[e(y,{"max-width":"450px",width:"100%",elevation:"2",class:"px-5 pt-10 pb-10"},{default:o(()=>[e(g,{class:"d-flex justify-center mt-3"},{default:o(()=>[v("PAYARIQ MED-KOLLEJ")]),_:1}),e(x,{ref_key:"form",ref:u},{default:o(()=>[e(h,null,{default:o(()=>[e(m,null,{default:o(()=>[e(p,{cols:"12"},{default:o(()=>[e(_,{modelValue:n.value.login,"onUpdate:modelValue":l[0]||(l[0]=c=>n.value.login=c),label:"Login","hide-details":"",rules:d,variant:"solo"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:o(()=>[e(_,{modelValue:n.value.password,"onUpdate:modelValue":l[1]||(l[1]=c=>n.value.password=c),label:"Parol","hide-details":"",autocomplete:"on",rules:d,variant:"solo","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",type:s.value?"text":"password","onClick:appendInner":l[2]||(l[2]=c=>s.value=!s.value)},null,8,["modelValue","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(k,{class:"px-4"},{default:o(()=>[e(b,{color:"primary",height:"48",variant:"elevated",block:"",onClick:w},{default:o(()=>[v("Tizimga kirish")]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{B as default};
