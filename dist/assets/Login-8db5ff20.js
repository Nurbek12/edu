import{a as T}from"./index-7376b9a9.js";import{u as U,r as c,a as o,o as j,c as L,w as t,b as e,f as v}from"./index-6f11c559.js";const N={__name:"Login",setup(B){const i=U(),s=c(!1),d=[n=>!!n||"Required"],u=c(null),a=c({login:"",password:""}),f=async()=>{const{data:n}=await T.post("/auth/login",{login:a.value.login,password:a.value.password});if(console.log(n),n.success)switch(i.commit("setUser",n.user),i.commit("setToken",n.token),localStorage.setItem("logintime",Date.now()),n.user.role){case"admin":window.location.href="/admin";break;case"student":window.location.href="/";break;case"inspector":window.location.href="/inspector";break;case"sa":window.location.href="/secret";break}else Object.assign(a.value,{login:"",password:""})},w=async()=>{const{valid:n}=await u.value.validate();n&&f()};return(n,l)=>{const g=o("v-card-title"),p=o("v-text-field"),_=o("v-col"),m=o("v-row"),k=o("v-card-text"),x=o("v-spacer"),y=o("v-btn"),b=o("v-card-actions"),h=o("v-form"),V=o("v-card"),C=o("v-container");return j(),L(C,{fluid:"",class:"bg-img"},{default:t(()=>[e(m,{justify:"center",align:"center"},{default:t(()=>[e(V,{"max-width":"450px",width:"100%",class:"mt-10"},{default:t(()=>[e(g,{class:"d-flex justify-center mt-3"},{default:t(()=>[v("EDU-PLATFORM")]),_:1}),e(h,{ref_key:"form",ref:u},{default:t(()=>[e(k,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{cols:"12"},{default:t(()=>[e(p,{modelValue:a.value.login,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.login=r),label:"Login",color:"primary","prepend-inner-icon":"mdi-account","hide-details":"",rules:d,variant:"outlined"},null,8,["modelValue"])]),_:1}),e(_,{cols:"12"},{default:t(()=>[e(p,{modelValue:a.value.password,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.password=r),label:"Parol",color:"primary","prepend-inner-icon":"mdi-lock","hide-details":"",autocomplete:"on",rules:d,variant:"outlined","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",type:s.value?"text":"password","onClick:appendInner":l[2]||(l[2]=r=>s.value=!s.value)},null,8,["modelValue","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(b,{class:"px-4"},{default:t(()=>[e(x),e(y,{color:"primary",height:"45",variant:"tonal",onClick:w},{default:t(()=>[v("Tizimga kirish")]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{N as default};
