import{u as j,g as B,r as c,a as t,o as C,c as L,w as o,b as e,f,h as O}from"./index-eee0caed.js";const z={__name:"Login",setup(R){const i=j();B();const s=c(!1),d=[a=>!!a||"Required"],u=c(null),n=c({login:"",password:""}),g=async()=>{var l;const{data:a}=await O.post("/auth/login",{login:n.value.login,password:n.value.password});a.success?(i.commit("setUser",a.user),i.commit("setToken",a.token),a.user.role==="student"?(localStorage.setItem("start_year",((l=a.user)==null?void 0:l.start_year)||2023),window.location.href="/"):window.location.href="/"+a.user.role):Object.assign(n.value,{login:"",password:""})},w=async()=>{const{valid:a}=await u.value.validate();a&&g()};return(a,l)=>{const y=t("v-img"),x=t("v-avatar"),_=t("v-card-text"),h=t("v-card-title"),p=t("v-text-field"),v=t("v-col"),m=t("v-row"),b=t("v-btn"),k=t("v-card-actions"),V=t("v-form"),I=t("v-card"),T=t("v-container");return C(),L(T,{fluid:"",class:"bg-img py-0 h-100"},{default:o(()=>[e(m,{class:"h-100",justify:"center",align:"center"},{default:o(()=>[e(I,{"max-width":"420px",width:"100%",elevation:"2",class:"px-1 py-4"},{default:o(()=>[e(_,{class:"d-flex justify-center pb-0 pt-1"},{default:o(()=>[e(x,{rounded:"",size:"200"},{default:o(()=>[e(y,{src:"/logo.png"})]),_:1})]),_:1}),e(h,{class:"d-flex justify-center"},{default:o(()=>[f("PAYARIQ TIBBIYOT KOLLEJI")]),_:1}),e(V,{ref_key:"form",ref:u},{default:o(()=>[e(_,null,{default:o(()=>[e(m,null,{default:o(()=>[e(v,{cols:"12",class:"py-2"},{default:o(()=>[e(p,{modelValue:n.value.login,"onUpdate:modelValue":l[0]||(l[0]=r=>n.value.login=r),label:"Login","hide-details":"",color:"primary",rules:d,variant:"solo"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"py-2"},{default:o(()=>[e(p,{modelValue:n.value.password,"onUpdate:modelValue":l[1]||(l[1]=r=>n.value.password=r),label:"Parol","hide-details":"",autocomplete:"off",rules:d,color:"primary",variant:"solo","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",type:s.value?"text":"password","onClick:appendInner":l[2]||(l[2]=r=>s.value=!s.value)},null,8,["modelValue","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(k,{class:"px-4 py-1"},{default:o(()=>[e(b,{color:"primary",height:"48",variant:"elevated",block:"",onClick:w},{default:o(()=>[f("Tizimga kirish")]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}};export{z as default};
