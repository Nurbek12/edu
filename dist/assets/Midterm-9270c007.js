import{a as b}from"./index-7376b9a9.js";import{r as v,l as _e,m as J,a as n,o as j,c as I,w as a,b as e,f as _,d as c,t as m,e as fe,h as K,i as W,F as X,j as xe,n as G}from"./index-1d6c4b32.js";const ye={"data-label":"T/r"},be={"data-label":"Test Nomi"},Ve={"data-label":"Fan"},he={"data-label":"Sanasi"},ge={"data-label":"Muhlari"},ke={"data-label":"Guruh"},we={"data-label":"Testlar soni"},Ue={"data-label":"Boshqarish"},je={class:"d-flex justify-end"},Ce=c("div",null,"Hech narsa topilmadi",-1),Te={class:"text-h5"},Oe={class:"text-h5"},ze={class:"text-subtitle-2"},Ie={__name:"Midterm",setup($e){const Z=[{title:"T/r",align:"start",key:"no",sortable:!1},{title:"Test Nomi",key:"name"},{title:"Fan",key:"subject",sortable:!1},{title:"Guruh",key:"group",sortable:!1},{title:"Sanasi",key:"date",sortable:!1},{title:"Muhlati",key:"time",sortable:!1},{title:"Testlar soni",key:"count",sortable:!1},{title:"Boshqarish",key:"actions",sortable:!1}],u=[l=>!!l||"Required"],N=v(null),z=v(null),Q=v(""),g=v([]),k=v(!1),C=v(!1),V=v(-1),h=v(-1),S=v([]),M=v([]),p=v([]),w=v(null),i=v({text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]}),s=v({name:"",groups:[],subject:null,count:0,time:0,date:""}),A={name:"",groups:[],subject:null,count:0,time:0,date:""},ee=_e(()=>V.value===-1?"Oraliq Yaratish":"Oraliq O'zgartirish");J(k,l=>l||$()),J(C,l=>l||de());const ae=async()=>{const[l,o,r]=await Promise.all([b.get("/group/access"),b.get("/subject"),b.get("/midterm")]);g.value=r.data,S.value=l.data,M.value=o.data},te=async()=>{const{valid:l}=await N.value.validate();l&&re()},le=async()=>{const{valid:l}=await z.value.validate();l&&ce()},oe=l=>{V.value=g.value.indexOf(l),h.value=l._id,s.value=Object.assign({},l),k.value=!0},se=async l=>{if(!l.questions){const{data:o}=await b.get(`/midterm/id/${l._id}`);l.questions=o.questions}V.value=g.value.indexOf(l),h.value=l._id,p.value=l.questions,C.value=!0},ne=(l,o)=>{w.value=o,i.value=Object.assign({},l)},ue=l=>{V.value=g.value.indexOf(l),s.value=Object.assign({},l),h.value=l._id,confirm("Ushbu malumotni o'chirmoqchimisiz?")?ie():$()},ie=async()=>{const{data:l}=await b.delete(`/midterm/${h.value}`);l&&(g.value.splice(V.value,1),$())},$=()=>{k.value=!1,G(()=>{var l,o;s.value=Object.assign({},A),h.value=-1,V.value=-1,(l=N.value)==null||l.reset(),(o=z.value)==null||o.reset()})},de=()=>{C.value=!1,G(()=>{s.value=Object.assign({},A),h.value=-1,p.value=[],V.value=-1,w.value=null,i.value=Object.assign({},{text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]})})},re=async()=>{if(V.value>-1){const{data:l}=await b.put(`/midterm/${h.value}`,s.value);Object.assign(g.value[V.value],l)}else{const{data:l}=await b.post("/midterm",{questions:p.value,...s.value});g.value.push(l)}$()},me=()=>{p.value.push({text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]}),G(()=>{document.querySelector(".test-scroll").scrollTop=document.querySelector(".test-scroll").scrollHeight})},H=async l=>{confirm("Ushbu malumotni o'chirmoqchimisiz?")&&(p.value[l]._id&&await b.delete(`/test/question/${p.value[l]._id}`),p.value.splice(l,1))},ce=async()=>{var l;if(w.value!==null){delete i.value._id;const{data:o}=await b.put(`/test/question/${p.value[w.value]._id}`,i.value);Object.assign(p.value[w.value],o)}else{const{data:o}=await b.post("/test/question",{midterm:h.value,...i.value});p.value.push(o)}w.value=null,i.value=Object.assign({},{text:"",variants:[{text:"",value:1},{text:"",value:0},{text:"",value:0},{text:"",value:0}]}),(l=z.value)==null||l.reset()};return ae(),(l,o)=>{const r=n("v-text-field"),d=n("v-col"),y=n("v-btn"),T=n("v-row"),R=n("v-sheet"),F=n("v-select"),U=n("v-icon"),ve=n("v-data-table"),E=n("v-card-title"),L=n("v-textarea"),q=n("v-card-text"),B=n("v-card"),P=n("v-form"),D=n("v-container"),Y=n("v-dialog"),O=n("v-banner-text"),pe=n("v-banner");return j(),I(D,{fluid:""},{default:a(()=>[e(T,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(R,{elevation:"1",color:"surface",width:"100%",class:"pa-2 py-4",rounded:""},{default:a(()=>[e(T,{justify:"space-between"},{default:a(()=>[e(d,{class:"py-1",cols:"12",sm:"4"},{default:a(()=>[e(r,{label:"Qidirish",modelValue:Q.value,"onUpdate:modelValue":o[0]||(o[0]=t=>Q.value=t),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(d,{class:"py-1",cols:"12",sm:"4",md:"3"},{default:a(()=>[e(y,{block:"",height:"42",color:"primary",onClick:o[1]||(o[1]=t=>k.value=!0),variant:"flat"},{default:a(()=>[_("Test yaratish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(R,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:a(()=>[e(ve,{"items-per-page-text":"",headers:Z,search:Q.value,items:g.value},{"item.no":a(({index:t})=>[c("td",ye,m(t+1)+".",1)]),"item.name":a(({item:t})=>[c("td",be,m(t.raw.name),1)]),"item.subject":a(({item:t})=>[c("td",Ve,m(t.raw.subject),1)]),"item.date":a(({item:t})=>[c("td",he,m(t.raw.date),1)]),"item.time":a(({item:t})=>[c("td",ge,m(t.raw.time),1)]),"item.group":a(({item:t})=>[c("td",ke,[e(F,{items:S.value,readonly:"",chips:"",multiple:"","item-value":"_id","item-title":"name",variant:"solo","hide-details":"",flat:"",modelValue:t.raw.groups,"onUpdate:modelValue":f=>t.raw.groups=f},null,8,["items","modelValue","onUpdate:modelValue"])])]),"item.count":a(({item:t})=>[c("td",we,m(t.raw.count),1)]),"item.actions":a(({item:t})=>[c("td",Ue,[c("div",je,[e(y,{variant:"flat",size:"30",color:"primary",onClick:f=>oe(t.raw)},{default:a(()=>[e(U,null,{default:a(()=>[_("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),e(y,{variant:"flat",class:"ml-1",size:"30",onClick:f=>se(t.raw),color:"primary"},{default:a(()=>[e(U,null,{default:a(()=>[_("mdi-sitemap")]),_:1})]),_:2},1032,["onClick"]),e(y,{variant:"flat",class:"ml-1",size:"30",color:"primary",onClick:f=>ue(t.raw)},{default:a(()=>[e(U,null,{default:a(()=>[_("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])])]),"no-data":a(()=>[Ce]),_:1},8,["search","items"])]),_:1})]),_:1})]),_:1}),e(Y,{modelValue:k.value,"onUpdate:modelValue":o[8]||(o[8]=t=>k.value=t),"max-width":"550px"},{default:a(()=>[e(B,{class:"test-scroll"},{default:a(()=>[e(E,{class:"mt-2 ml-2 mb-0"},{default:a(()=>[c("span",Te,m(fe(ee)),1)]),_:1}),e(q,{class:"px-2 pt-0"},{default:a(()=>[e(D,null,{default:a(()=>[e(P,{ref_key:"form",ref:N},{default:a(()=>[e(T,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(r,{modelValue:s.value.name,"onUpdate:modelValue":o[2]||(o[2]=t=>s.value.name=t),label:"Test Nomi","hide-details":"",rules:u,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:a(()=>[e(r,{modelValue:s.value.time,"onUpdate:modelValue":o[3]||(o[3]=t=>s.value.time=t),label:"Testga beriladigan vaqt","hide-details":"",rules:u,type:"number",color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:a(()=>[e(r,{modelValue:s.value.count,"onUpdate:modelValue":o[4]||(o[4]=t=>s.value.count=t),label:"Testlar soni","hide-details":"",rules:u,type:"number",color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:a(()=>[e(r,{modelValue:s.value.date,"onUpdate:modelValue":o[5]||(o[5]=t=>s.value.date=t),label:"Test vaqti",type:"date","hide-details":"",rules:u,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6"},{default:a(()=>[e(F,{modelValue:s.value.subject,"onUpdate:modelValue":o[6]||(o[6]=t=>s.value.subject=t),label:"Fan",rules:u,"hide-details":"",items:M.value,color:"primary","item-title":"name","item-value":"name",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(F,{modelValue:s.value.groups,"onUpdate:modelValue":o[7]||(o[7]=t=>s.value.groups=t),label:"Guruhi","hide-details":"",multiple:"",items:S.value,chips:"",color:"primary",rules:u,"item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(d,{cols:"12",class:"px-3"},{default:a(()=>[e(T,null,{default:a(()=>[(j(!0),K(X,null,W(p.value,(t,f)=>(j(),I(d,{cols:"12"},{default:a(()=>[e(B,{variant:"outlined",class:"pa-2"},{default:a(()=>[e(L,{density:"compact",color:"primary","hide-details":"",label:"Test savoli","no-resize":"",variant:"outlined",rows:"3",rules:u,modelValue:t.text,"onUpdate:modelValue":x=>t.text=x},{"prepend-inner":a(()=>[c("div",null,m(f+1)+".",1)]),"append-inner":a(()=>[c("div",null,[e(y,{size:"x-small",variant:"text",icon:"mdi-close",color:"red",onClick:x=>H(f)},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(q,{class:"pa-0"},{default:a(()=>[e(r,{variant:"outlined",color:"primary",class:"my-2","hide-details":"",density:"compact",rules:u,label:"A variant (to'gri javob)",modelValue:t.variants[0].text,"onUpdate:modelValue":x=>t.variants[0].text=x},null,8,["modelValue","onUpdate:modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2","hide-details":"",rules:u,density:"compact",label:"B variant",modelValue:t.variants[1].text,"onUpdate:modelValue":x=>t.variants[1].text=x},null,8,["modelValue","onUpdate:modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2","hide-details":"",rules:u,density:"compact",label:"C variant",modelValue:t.variants[2].text,"onUpdate:modelValue":x=>t.variants[2].text=x},null,8,["modelValue","onUpdate:modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:u,"hide-details":"",density:"compact",label:"D variant",modelValue:t.variants[3].text,"onUpdate:modelValue":x=>t.variants[3].text=x},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),h.value===-1?(j(),I(d,{key:0,cols:"12"},{default:a(()=>[e(y,{variant:"flat",color:"primary",block:"",onClick:me,height:"45"},{default:a(()=>[_(" Savol Qo'shish ")]),_:1})]),_:1})):xe("",!0)]),_:1})]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(y,{variant:"flat",color:"primary",block:"",onClick:te,height:"45"},{default:a(()=>[_(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,{modelValue:C.value,"onUpdate:modelValue":o[14]||(o[14]=t=>C.value=t),"max-width":"550px"},{default:a(()=>[e(B,{class:"test-scroll"},{default:a(()=>[e(E,{class:"mt-2 ml-2 mb-0"},{default:a(()=>{var t;return[c("span",Oe,"Testlar ("+m((t=p.value)==null?void 0:t.length)+")",1)]}),_:1}),e(q,{class:"px-2 pt-0"},{default:a(()=>[e(D,null,{default:a(()=>[e(P,{ref_key:"form1",ref:z},{default:a(()=>[e(T,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(B,{variant:"tonal",class:"pa-2"},{default:a(()=>[e(L,{density:"compact",color:"primary","hide-details":"",label:"Test savoli","no-resize":"",rules:u,variant:"outlined",rows:"3",modelValue:i.value.text,"onUpdate:modelValue":o[9]||(o[9]=t=>i.value.text=t)},{"append-inner":a(()=>[e(y,{size:"30",variant:"flat",onClick:le,color:"primary"},{default:a(()=>[e(U,null,{default:a(()=>[_("mdi-text-box-plus")]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{class:"pa-0"},{default:a(()=>[e(r,{variant:"outlined",color:"primary",class:"my-2",rules:u,"hide-details":"",modelValue:i.value.variants[0].text,"onUpdate:modelValue":o[10]||(o[10]=t=>i.value.variants[0].text=t),density:"compact",label:"A variant (to'gri javob)"},null,8,["modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:u,"hide-details":"",modelValue:i.value.variants[1].text,"onUpdate:modelValue":o[11]||(o[11]=t=>i.value.variants[1].text=t),density:"compact",label:"B variant"},null,8,["modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:u,"hide-details":"",modelValue:i.value.variants[2].text,"onUpdate:modelValue":o[12]||(o[12]=t=>i.value.variants[2].text=t),density:"compact",label:"C variant"},null,8,["modelValue"]),e(r,{variant:"outlined",color:"primary",class:"my-2",rules:u,"hide-details":"",modelValue:i.value.variants[3].text,"onUpdate:modelValue":o[13]||(o[13]=t=>i.value.variants[3].text=t),density:"compact",label:"D variant"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:a(()=>[(j(!0),K(X,null,W(p.value,(t,f)=>(j(),I(pe,{lines:"three",class:"my-1",key:f},{actions:a(()=>[e(y,{variant:"flat",size:"30",onClick:x=>ne(t,f),color:"primary"},{default:a(()=>[e(U,null,{default:a(()=>[_("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),e(y,{variant:"flat",class:"ml-1",size:"30",onClick:x=>H(f),color:"primary"},{default:a(()=>[e(U,null,{default:a(()=>[_("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[e(O,null,{default:a(()=>[c("span",ze,m(f+1)+". "+m(t.text),1)]),_:2},1024),e(O,{class:"text-caption"},{default:a(()=>[_("a) "+m(t.variants[0].text),1)]),_:2},1024),e(O,{class:"text-caption"},{default:a(()=>[_("b) "+m(t.variants[1].text),1)]),_:2},1024),e(O,{class:"text-caption"},{default:a(()=>[_("c) "+m(t.variants[2].text),1)]),_:2},1024),e(O,{class:"text-caption"},{default:a(()=>[_("d) "+m(t.variants[3].text),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{Ie as default};
