import{r as b,k as Y,g as A,a as n,o as s,c as _,w as e,b as t,h as y,i as g,F as h,f as o,d as I,t as r}from"./index-e60ab6e1.js";import{a as B}from"./index-7376b9a9.js";const H={class:"d-flex",style:{"flex-wrap":"wrap",gap:"10px"}},W={__name:"MidtermExam",setup(K){const p=b([]),x=b(""),u=b(null),L=Y();A();const $=L.params.id,T=b("00:00");function R(){let c=Math.floor(u.value.midterm.time*60-(Date.now()-parseInt(u.value.start_time))/1e3);function m(a){if(a>0){a--;let f=Math.floor(a/60),v=a%60;T.value=`${f<10?"0"+f:f}:${v<10?"0"+v:v}`,setTimeout(m,1e3,a)}else a===0&&F()}m(c)}function S(){window.history.back()}const C=async()=>{const{data:c}=await B.get(`/midterm/get/${$}`);u.value=c,c.status==="start"&&R(),x.value=c.status,p.value=c.questions},U=async(c,m)=>{T.value!=="00:00"&&await B.put(`/midterm/upd/${$}/${c}/${m}`)},F=async()=>{await B.put(`/midterm/finish/${$}`),C(),x.value="finish"},j=c=>new Date(parseInt(c)).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(/[/,-]/g,":").replace(/\b\d\b/g,"0$&");return C(),(c,m)=>{const a=n("v-card-text"),f=n("v-radio"),v=n("v-radio-group"),w=n("v-card"),k=n("v-col"),D=n("v-card-title"),G=n("v-chip"),M=n("v-spacer"),N=n("v-btn"),E=n("v-card-actions"),V=n("v-row"),J=n("v-sheet"),O=n("v-container");return s(),_(O,{fluid:""},{default:e(()=>[x.value==="start"?(s(),_(V,{key:0},{default:e(()=>[t(k,{cols:"12",md:"7"},{default:e(()=>[(s(!0),y(h,null,g(p.value,(l,d)=>(s(),_(w,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[o(r(d+1)+". "+r(l.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[t(v,{color:"primary",modelValue:l.selected,"onUpdate:modelValue":i=>l.selected=i,onChange:i=>U(d,l.selected),"hide-details":""},{default:e(()=>[(s(!0),y(h,null,g(l.variants,(i,z)=>(s(),_(f,{key:z,label:i.text,value:i._id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(k,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(w,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(D,null,{default:e(()=>[o("Javoblar")]),_:1}),t(a,{class:"mt-4"},{default:e(()=>[I("div",H,[(s(!0),y(h,null,g(p.value,(l,d)=>(s(),_(G,{size:"large",key:d,color:l.selected?"green":"white",variant:"elevated"},{default:e(()=>[o(r(d+1),1)]),_:2},1032,["color"]))),128))])]),_:1}),t(E,{class:"pl-5"},{default:e(()=>[I("span",null,r(T.value),1),t(M),t(N,{color:"primary",onClick:F},{default:e(()=>[o("Yakunlash")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):x.value==="finish"?(s(),_(V,{key:1},{default:e(()=>[t(k,{cols:"12",md:"7"},{default:e(()=>[(s(!0),y(h,null,g(p.value,(l,d)=>(s(),_(w,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[o(r(d+1)+". "+r(l.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[(s(!0),y(h,null,g(l.variants,(i,z)=>(s(),_(J,{width:"100%",rounded:"",class:"my-1 py-1 px-2",color:l.selected===i._id?i.value?"green":"red":"gray"},{default:e(()=>[o(r(i.text),1)]),_:2},1032,["color"]))),256))]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(k,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(w,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(D,null,{default:e(()=>[o("Natijalar")]),_:1}),t(a,{class:"py-1"},{default:e(()=>{var l;return[o("Test nomi: "+r((l=u.value.midterm)==null?void 0:l.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>{var l;return[o("Talaba: "+r((l=u.value.student)==null?void 0:l.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Boshlandi: "+r(j(u.value.start_time)),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Tugadi: "+r(j(u.value.end_time)),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("To'gri: "+r(u.value.rate),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Foiz: "+r(parseFloat(u.value.rate*100/p.value.length).toFixed(1))+" %",1)]),_:1}),t(E,null,{default:e(()=>[t(M),t(N,{color:"primary",variant:"flat",onClick:m[0]||(m[0]=l=>S())},{default:e(()=>[o("Ortga qaytish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(s(),_(V,{key:2}))]),_:1})}}};export{W as default};
