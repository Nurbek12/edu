import{r as b,q as Q,g as Y,a as n,o,c as _,w as e,h as B,b as t,i as h,j as g,F as x,f as s,d as T,t as r}from"./index-868e85fe.js";const A={class:"d-flex",style:{"flex-wrap":"wrap",gap:"10px"}},G=T("div",{class:"d-flex justify-center text-red"},"Ushbu Oraliq Testi Topilmadi!",-1),H={class:"d-flex justify-center mt-3"},W={__name:"MidtermExam",setup(K){const v=b([]),w=b(""),u=b(null),U=Q();Y();const $=U.params.id,j=b("00:00");function z(){let c=Math.floor(u.value.midterm.time*60-(Date.now()-parseInt(u.value.start_time))/1e3);function f(a){if(a>0){a--;let p=Math.floor(a/60),m=a%60;j.value=`${p<10?"0"+p:p}:${m<10?"0"+m:m}`,setTimeout(f,1e3,a)}else a===0&&M()}f(c)}function F(){window.history.back()}const D=async()=>{const{data:c}=await B.get(`/midterm/get/${$}`);c&&(u.value=c,c.status==="start"&&z(),w.value=c.status,v.value=c.questions)},R=async(c,f)=>{j.value!=="00:00"&&await B.put(`/test/upd/${$}/${c}/${f}`)},M=async()=>{await B.put(`/test/finish/${$}`),D(),w.value="finish"};return D(),(c,f)=>{const a=n("v-card-text"),p=n("v-radio"),m=n("v-radio-group"),k=n("v-card"),y=n("v-col"),N=n("v-card-title"),I=n("v-chip"),E=n("v-spacer"),C=n("v-btn"),L=n("v-card-actions"),V=n("v-row"),O=n("v-sheet"),J=n("v-container");return o(),_(J,{fluid:""},{default:e(()=>[w.value==="start"?(o(),_(V,{key:0},{default:e(()=>[t(y,{cols:"12",md:"7"},{default:e(()=>[(o(!0),h(x,null,g(v.value,(l,d)=>(o(),_(k,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[s(r(d+1)+". "+r(l.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[t(m,{color:"primary",modelValue:l.selected,"onUpdate:modelValue":i=>l.selected=i,onChange:i=>R(d,l.selected),"hide-details":""},{default:e(()=>[(o(!0),h(x,null,g(l.variants,(i,S)=>(o(),_(p,{key:S,label:i.text,value:i._id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(y,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(k,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(N,null,{default:e(()=>[s("Javoblar")]),_:1}),t(a,{class:"mt-4"},{default:e(()=>[T("div",A,[(o(!0),h(x,null,g(v.value,(l,d)=>(o(),_(I,{size:"large",key:d,color:l.selected?"green":"white",variant:"elevated"},{default:e(()=>[s(r(d+1),1)]),_:2},1032,["color"]))),128))])]),_:1}),t(L,{class:"pl-5"},{default:e(()=>[T("span",null,r(j.value),1),t(E),t(C,{color:"primary",variant:"flat",onClick:M},{default:e(()=>[s("Yakunlash")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):w.value==="finish"?(o(),_(V,{key:1},{default:e(()=>[t(y,{cols:"12",md:"7"},{default:e(()=>[(o(!0),h(x,null,g(v.value,(l,d)=>(o(),_(k,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[s(r(d+1)+". "+r(l.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[(o(!0),h(x,null,g(l.variants,(i,S)=>(o(),_(O,{width:"100%",rounded:"",class:"my-1 py-1 px-2",color:l.selected===i._id?i.value?"green":"red":"gray"},{default:e(()=>[s(r(i.text),1)]),_:2},1032,["color"]))),256))]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(y,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(k,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(N,null,{default:e(()=>[s("Natijalar")]),_:1}),t(a,{class:"py-1"},{default:e(()=>{var l;return[s("Test nomi: "+r((l=u.value.midterm)==null?void 0:l.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>{var l;return[s("Talaba: "+r((l=u.value.student)==null?void 0:l.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>[s("Boshlandi: "+r(new Date(u.value.start_time).toLocaleString()),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[s("Tugadi: "+r(new Date(u.value.end_time).toLocaleString()),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[s("To'gri: "+r(u.value.rate),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[s("Foiz: "+r(parseFloat(u.value.rate*100/v.value.length).toFixed(1))+" %",1)]),_:1}),t(L,null,{default:e(()=>[t(E),t(C,{color:"primary",variant:"flat",onClick:f[0]||(f[0]=l=>F())},{default:e(()=>[s("Ortga qaytish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(o(),_(V,{key:2},{default:e(()=>[t(y,{cols:"12"},{default:e(()=>[t(O,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[G,T("div",H,[t(C,{variant:"flat",color:"primary",onClick:F},{default:e(()=>[s("Ortga Qaytish")]),_:1})])]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{W as default};
