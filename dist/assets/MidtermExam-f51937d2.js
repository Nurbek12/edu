import{r as b,q as Y,g as A,a as n,o as s,c as i,w as e,h as C,b as t,i as y,j as h,F as g,f as o,d as L,t as c}from"./index-2e243627.js";const G={class:"d-flex",style:{"flex-wrap":"wrap",gap:"10px"}},P={__name:"MidtermExam",setup(H){const v=b([]),x=b(""),r=b(null),S=Y();A();const $=S.params.id,T=b("00:00");function z(){let u=Math.floor(r.value.midterm.time*60-(Date.now()-parseInt(r.value.start_time))/1e3);function f(a){if(a>0){a--;let p=Math.floor(a/60),m=a%60;T.value=`${p<10?"0"+p:p}:${m<10?"0"+m:m}`,setTimeout(f,1e3,a)}else a===0&&B()}f(u)}function R(){window.history.back()}const j=async()=>{const{data:u}=await C.get(`/midterm/get/${$}`);r.value=u,u.status==="start"&&z(),x.value=u.status,v.value=u.questions},U=async(u,f)=>{T.value!=="00:00"&&await C.put(`/test/upd/${$}/${u}/${f}`)},B=async()=>{await C.put(`/test/finish/${$}`),j(),x.value="finish"};return j(),(u,f)=>{const a=n("v-card-text"),p=n("v-radio"),m=n("v-radio-group"),w=n("v-card"),k=n("v-col"),F=n("v-card-title"),I=n("v-chip"),D=n("v-spacer"),M=n("v-btn"),N=n("v-card-actions"),V=n("v-row"),J=n("v-sheet"),O=n("v-container");return s(),i(O,{fluid:""},{default:e(()=>[x.value==="start"?(s(),i(V,{key:0},{default:e(()=>[t(k,{cols:"12",md:"7"},{default:e(()=>[(s(!0),y(g,null,h(v.value,(l,d)=>(s(),i(w,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[o(c(d+1)+". "+c(l.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[t(m,{color:"primary",modelValue:l.selected,"onUpdate:modelValue":_=>l.selected=_,onChange:_=>U(d,l.selected),"hide-details":""},{default:e(()=>[(s(!0),y(g,null,h(l.variants,(_,E)=>(s(),i(p,{key:E,label:_.text,value:_._id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(k,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(w,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(F,null,{default:e(()=>[o("Javoblar")]),_:1}),t(a,{class:"mt-4"},{default:e(()=>[L("div",G,[(s(!0),y(g,null,h(v.value,(l,d)=>(s(),i(I,{size:"large",key:d,color:l.selected?"green":"white",variant:"elevated"},{default:e(()=>[o(c(d+1),1)]),_:2},1032,["color"]))),128))])]),_:1}),t(N,{class:"pl-5"},{default:e(()=>[L("span",null,c(T.value),1),t(D),t(M,{color:"primary",variant:"flat",onClick:B},{default:e(()=>[o("Yakunlash")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):x.value==="finish"?(s(),i(V,{key:1},{default:e(()=>[t(k,{cols:"12",md:"7"},{default:e(()=>[(s(!0),y(g,null,h(v.value,(l,d)=>(s(),i(w,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[o(c(d+1)+". "+c(l.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[(s(!0),y(g,null,h(l.variants,(_,E)=>(s(),i(J,{width:"100%",rounded:"",class:"my-1 py-1 px-2",color:l.selected===_._id?_.value?"green":"red":"gray"},{default:e(()=>[o(c(_.text),1)]),_:2},1032,["color"]))),256))]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(k,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(w,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(F,null,{default:e(()=>[o("Natijalar")]),_:1}),t(a,{class:"py-1"},{default:e(()=>{var l;return[o("Test nomi: "+c((l=r.value.midterm)==null?void 0:l.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>{var l;return[o("Talaba: "+c((l=r.value.student)==null?void 0:l.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Boshlandi: "+c(new Date(r.value.start_time).toLocaleString()),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Tugadi: "+c(new Date(r.value.end_time).toLocaleString()),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("To'gri: "+c(r.value.rate),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Foiz: "+c(parseFloat(r.value.rate*100/v.value.length).toFixed(1))+" %",1)]),_:1}),t(N,null,{default:e(()=>[t(D),t(M,{color:"primary",variant:"flat",onClick:f[0]||(f[0]=l=>R())},{default:e(()=>[o("Ortga qaytish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(s(),i(V,{key:2}))]),_:1})}}};export{P as default};
