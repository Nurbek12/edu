import{a as v}from"./index-7376b9a9.js";import{r as d,a as n,o as S,c as j,w as t,b as e,d as c,f as g,t as u}from"./index-28b05177.js";const q={class:"responsive-datatable"},D={"data-label":"Boshqarish"},K={class:"d-flex justify-end"},T={"data-label":"Ism familiyasi"},U={"data-label":"Telefoni"},L={"data-label":"Kontrakt"},Q={__name:"StudentList",setup(G){const k=[{title:"Ism familiyasi",key:"name"},{title:"Telefoni",key:"phone"},{title:"Kontrakt",key:"total"},{title:"Boshqarish",align:"start",key:"actions",sortable:!1}],m=d(""),_=d([]),f=d([]),p=d(null),V=async()=>{const{data:a}=await v.get("/group");f.value=a},x=async(a,s)=>{const l=prompt("Kontrakt summasi");if(!(isNaN(l)||l===""||l===null)&&confirm(`${a.name} ga ${l} pul o'tkazilsinmi?`)){const{data:i}=await v.post("/user/contract",{student:a._id,amount:parseInt(l),date:new Date().toLocaleDateString()});Object.assign(_.value[s],{total:a.total+parseInt(l),contract:[...a.contract,i]})}},$=a=>{let s=`Vaqti	Summasi
`;a.map(({amount:l,date:i})=>s+=`${i}	${l}
`),alert(s)},C=async()=>{const{data:a}=await v.get(`/user/contract/${p.value}`);_.value=a};return V(),(a,s)=>{const l=n("v-select"),i=n("v-col"),B=n("v-text-field"),h=n("v-row"),y=n("v-sheet"),b=n("v-icon"),w=n("v-btn"),N=n("v-data-table"),z=n("v-container");return S(),j(z,{fluid:""},{default:t(()=>[e(h,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(y,{elevation:"1",color:"surface",width:"100%",class:"pa-2 py-4",rounded:""},{default:t(()=>[e(h,{justify:"start",align:"center"},{default:t(()=>[e(i,{class:"py-1",cols:"12",sm:"4"},{default:t(()=>[e(l,{modelValue:p.value,"onUpdate:modelValue":[s[0]||(s[0]=o=>p.value=o),C],label:"Guruh","hide-details":"",density:"compact",items:f.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(i,{class:"py-1",cols:"12",sm:"4"},{default:t(()=>[e(B,{label:"Qidirish",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=o=>m.value=o),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(y,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:t(()=>[c("div",q,[e(N,{"items-per-page":"-1","items-per-page-text":"","no-data-text":"Hech narsa topilmadi",headers:k,search:m.value,items:_.value},{"item.actions":t(({index:o,item:r})=>[c("td",D,[c("div",K,[e(w,{variant:"flat",color:"primary",size:"30",onClick:I=>$(r.raw.contract)},{default:t(()=>[e(b,null,{default:t(()=>[g("mdi-calendar")]),_:1})]),_:2},1032,["onClick"]),e(w,{variant:"flat",class:"ml-1",color:"primary",size:"30",onClick:I=>x(r.raw,o)},{default:t(()=>[e(b,null,{default:t(()=>[g("mdi-plus-circle")]),_:1})]),_:2},1032,["onClick"])])])]),bottom:t(()=>[]),"item.name":t(({index:o,item:r})=>[c("td",T,u(o+1)+". "+u(r.raw.name),1)]),"item.phone":t(({item:o})=>[c("td",U,u(o.raw.phone),1)]),"item.total":t(({item:o})=>[c("td",L,u(o.raw.total),1)]),_:1},8,["search","items"])])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Q as default};
