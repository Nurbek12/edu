import{l as M,r,m as W,a as i,o as X,c as Y,w as e,h as k,b as a,d as s,f as _,t as n,e as Z,n as ee}from"./index-868e85fe.js";const te={class:"responsive-datatable"},ae={"data-label":"Boshqarish"},le={class:"d-flex justify-end"},se={"data-label":"Ism familiyasi"},oe={"data-label":"Login"},ie={"data-label":"Telefoni"},ne={"data-label":"Tugilgan sanasi"},de={"data-label":"Holati"},re={class:"responsive-datatable"},ue={"data-label":"Boshqarish"},ce={class:"d-flex justify-end"},_e={"data-label":"Ism familiyasi"},ve={"data-label":"Login"},me={"data-label":"Paroli"},pe={"data-label":"Telefoni"},he={"data-label":"Tugilgan sanasi"},fe={"data-label":"Holati"},be=["colspan"],ge={class:"text-h5"},xe={__name:"StudentsStatus",setup(we){const H=[l=>!!l||"Required"],V=[{title:"Ism familiyasi",key:"name"},{title:"Login",key:"login"},{title:"Telefoni",key:"phone"},{title:"Tugilgan sanasi",key:"birthdate"},{title:"Holati",key:"status"},{title:"Boshqarish",align:"start",key:"actions",sortable:!1}],O=M(()=>d.value.status!=="aktiv"?"Talabani Chetlatish":"Talabani Qaytarish"),f=r(""),m=r([]),p=r([]),v=r(!1),g=r(null),h=r(-1),b=r(-1),C=r([]),d=r({reason:"",status:"chetlashtirilgan",group:null}),S={reason:"",status:"chetlashtirilgan"},T=r([]);W(v,l=>l||I());const $=async()=>{const{data:l}=await k.get("/group");C.value=l},L=async()=>{const{valid:l}=await g.value.validate();l&&z()},N=(l,o)=>{h.value=m.value.indexOf(l),b.value=l._id,d.value=Object.assign({},{...l,status:o}),v.value=!0},Q=(l,o)=>{h.value=p.value.indexOf(l),b.value=l._id,d.value=Object.assign({},{...l,status:o}),v.value=!0},I=()=>{v.value=!1,ee(()=>{var l;d.value=Object.assign({},S),b.value=-1,h.value=-1,(l=g.value)==null||l.reset()})},z=async()=>{const{data:l}=await k.put(`/user/${b.value}`,d.value);d.value.status==="aktiv"?(p.value.splice(h.value,1),m.value.push(l)):(m.value.splice(h.value,1),p.value.push(l)),I()},D=async()=>{const{data:l}=await k.get(`/user/student?group=${d.value.group}`);m.value=l==null?void 0:l.filter(o=>o.status==="aktiv"),p.value=l==null?void 0:l.filter(o=>o.status!=="aktiv")};return $(),(l,o)=>{const G=i("v-select"),u=i("v-col"),P=i("v-text-field"),w=i("v-row"),y=i("v-sheet"),j=i("v-icon"),x=i("v-btn"),B=i("v-chip"),U=i("v-data-table"),R=i("v-card-title"),A=i("v-textarea"),E=i("v-form"),q=i("v-container"),F=i("v-card-text"),J=i("v-card"),K=i("v-dialog");return X(),Y(q,{fluid:""},{default:e(()=>[a(w,null,{default:e(()=>[a(u,{cols:"12"},{default:e(()=>[a(y,{elevation:"1",color:"surface",width:"100%",class:"pa-2 py-4",rounded:""},{default:e(()=>[a(w,{justify:"start",align:"center"},{default:e(()=>[a(u,{class:"py-1",cols:"12",sm:"4"},{default:e(()=>[a(G,{modelValue:d.value.group,"onUpdate:modelValue":[o[0]||(o[0]=t=>d.value.group=t),D],label:"Guruh","hide-details":"",density:"compact",items:C.value,color:"primary","item-title":"name","item-value":"_id",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),a(u,{class:"py-1",cols:"12",sm:"4"},{default:e(()=>[a(P,{label:"Qidirish",modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=t=>f.value=t),variant:"outlined",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(u,{cols:"12"},{default:e(()=>[a(y,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[s("div",te,[a(U,{"items-per-page":"-1","items-per-page-text":"","no-data-text":"Hech narsa topilmadi",headers:V,search:f.value,items:m.value},{"item.actions":e(({item:t})=>[s("td",ae,[s("div",le,[a(x,{variant:"flat",color:"primary",onClick:c=>N(t.raw,"chetlashtirilgan")},{default:e(()=>[a(j,null,{default:e(()=>[_("mdi-hand-back-left")]),_:1}),_(" Chetlatish ")]),_:2},1032,["onClick"])])])]),bottom:e(()=>[]),"item.name":e(({index:t,item:c})=>[s("td",se,n(t+1)+". "+n(c.raw.name),1)]),"item.login":e(({item:t})=>[s("td",oe,n(t.raw.login),1)]),"item.phone":e(({item:t})=>[s("td",ie,n(t.raw.phone),1)]),"item.birthdate":e(({item:t})=>[s("td",ne,n(t.raw.birthdate),1)]),"item.status":e(({item:t})=>[s("td",de,[a(B,{label:"",color:{aktiv:"blue",chetlashtirilgan:"red"}[t.raw.status]},{default:e(()=>[_(n(t.raw.status),1)]),_:2},1032,["color"])])]),_:1},8,["search","items"])])]),_:1})]),_:1}),a(u,{cols:"12"},{default:e(()=>[a(y,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[s("div",re,[a(U,{"items-per-page":"-1","items-per-page-text":"","no-data-text":"Hech narsa topilmadi",headers:V,search:f.value,items:p.value,"item-value":"_id","show-expand":"",expanded:T.value,"onUpdate:expanded":o[2]||(o[2]=t=>T.value=t)},{bottom:e(()=>[]),"item.actions":e(({item:t})=>[s("td",ue,[s("div",ce,[a(x,{variant:"flat",color:"primary",onClick:c=>Q(t.raw,"aktiv")},{default:e(()=>[a(j,null,{default:e(()=>[_("mdi-restore-alert")]),_:1}),_(" Qaytarish ")]),_:2},1032,["onClick"])])])]),"item.name":e(({index:t,item:c})=>[s("td",_e,n(t+1)+". "+n(c.raw.name),1)]),"item.login":e(({item:t})=>[s("td",ve,n(t.raw.login),1)]),"item.password":e(({item:t})=>[s("td",me,n(t.raw.password),1)]),"item.phone":e(({item:t})=>[s("td",pe,n(t.raw.phone),1)]),"item.birthdate":e(({item:t})=>[s("td",he,n(t.raw.birthdate),1)]),"item.status":e(({item:t})=>[s("td",fe,[a(B,{label:"",color:{aktiv:"blue",chetlashtirilgan:"red"}[t.raw.status]},{default:e(()=>[_(n(t.raw.status),1)]),_:2},1032,["color"])])]),"expanded-row":e(({columns:t,item:c})=>[s("tr",null,[s("td",{colspan:t.length}," Chetlatish Sababi: "+n(c.raw.reason),9,be)])]),_:1},8,["search","items","expanded"])])]),_:1})]),_:1})]),_:1}),a(K,{modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=t=>v.value=t),"max-width":"550px"},{default:e(()=>[a(J,null,{default:e(()=>[a(R,{class:"mt-2 ml-2 mb-0"},{default:e(()=>[s("span",ge,n(Z(O)),1)]),_:1}),a(F,{class:"px-2 pt-0"},{default:e(()=>[a(q,null,{default:e(()=>[a(E,{ref_key:"form",ref:g},{default:e(()=>[a(w,null,{default:e(()=>[a(u,{cols:"12"},{default:e(()=>[a(A,{modelValue:d.value.reason,"onUpdate:modelValue":o[3]||(o[3]=t=>d.value.reason=t),label:"Chetlatish sababi","hide-details":"",rules:H,color:"primary",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12"},{default:e(()=>[a(x,{variant:"flat",color:"primary",block:"",onClick:L,height:"45"},{default:e(()=>[_(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{xe as default};
