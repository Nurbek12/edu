import{r as b,k as H,g as K,u as P,a as u,o as l,c as f,w as e,b as t,h as g,i as y,F as k,f as o,d as C,t as n}from"./index-6f11c559.js";import{a as B}from"./index-7376b9a9.js";import{l as Q}from"./index-61c3fb60.js";const W={class:"d-flex",style:{"flex-wrap":"wrap",gap:"10px"}},X=C("div",{class:"d-flex justify-center"},"Ushbu Test Topilmadi !",-1),ae={__name:"Test",setup(Z){const j=Q("http://localhost:5005"),p=b([]),w=b(""),r=b(null),R=H();K();const T=R.params.id,$=b("00:00"),A=P();function E(){let c=Math.floor(r.value.exam.time*60-(Date.now()-parseInt(r.value.start_time))/1e3);function d(a){if(a>0){a--;let v=Math.floor(a/60),m=a%60;$.value=`${v<10?"0"+v:v}:${m<10?"0"+m:m}`,setTimeout(d,1e3,a)}else a===0&&F()}d(c)}function G(){window.history.back()}const D=async()=>{var d,a;const{data:c}=await B.get(`/test/get/${T}`);r.value=c,c.status==="start"&&(j.emit("push-data",{user:(d=A.getters.user)==null?void 0:d.name,test:(a=r.value.test)==null?void 0:a.name,device:(navigator.userAgent||"(Nomalum qurilma)").match(/\([^\)]+\)/)[0],time:Date.now()}),E()),w.value=c.status,p.value=c.questions},J=async(c,d)=>{$.value!=="00:00"&&await B.put(`/test/upd/${T}/${c}/${d}`)},F=async()=>{await B.put(`/test/finish/${T}`),D(),j.emit("finish-test"),w.value="finish"},N=c=>new Date(parseInt(c)).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(/[/,-]/g,":").replace(/\b\d\b/g,"0$&");return D(),(c,d)=>{const a=u("v-card-text"),v=u("v-radio"),m=u("v-radio-group"),x=u("v-card"),h=u("v-col"),S=u("v-card-title"),O=u("v-chip"),U=u("v-spacer"),z=u("v-btn"),I=u("v-card-actions"),V=u("v-row"),L=u("v-sheet"),Y=u("v-container");return l(),f(Y,{fluid:""},{default:e(()=>[w.value==="start"?(l(),f(V,{key:0},{default:e(()=>[t(h,{cols:"12",md:"7"},{default:e(()=>[(l(!0),g(k,null,y(p.value,(s,i)=>(l(),f(x,{class:"mb-3",color:"surface",key:i},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[o(n(i+1)+". "+n(s.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[t(m,{color:"primary",modelValue:s.selected,"onUpdate:modelValue":_=>s.selected=_,onChange:_=>J(i,s.selected),"hide-details":""},{default:e(()=>[(l(!0),g(k,null,y(s.variants,(_,M)=>(l(),f(v,{key:M,label:_.text,value:_._id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(h,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(x,{width:"100%",color:"#222f3b",theme:"dark",class:"sticky"},{default:e(()=>[t(S,null,{default:e(()=>[o("Javoblar")]),_:1}),t(a,{class:"mt-4"},{default:e(()=>[C("div",W,[(l(!0),g(k,null,y(p.value,(s,i)=>(l(),f(O,{size:"large",key:i,color:s.selected?"green":"white",variant:"elevated"},{default:e(()=>[o(n(i+1),1)]),_:2},1032,["color"]))),128))])]),_:1}),t(I,{class:"pl-5"},{default:e(()=>[C("span",null,n($.value),1),t(U),t(z,{variant:"tonal",color:"#00da85",onClick:F},{default:e(()=>[o("Yakunlash")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):w.value==="finish"?(l(),f(V,{key:1},{default:e(()=>[t(h,{cols:"12",md:"7"},{default:e(()=>[(l(!0),g(k,null,y(p.value,(s,i)=>(l(),f(x,{class:"mb-3",color:"surface",key:i},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[o(n(i+1)+". "+n(s.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[(l(!0),g(k,null,y(s.variants,(_,M)=>(l(),f(L,{width:"100%",rounded:"",class:"my-1 py-1 px-2",color:s.selected===_._id?_.value?"green":"red":"gray"},{default:e(()=>[o(n(_.text),1)]),_:2},1032,["color"]))),256))]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(h,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(x,{width:"100%",color:"#222f3b",theme:"dark",class:"sticky"},{default:e(()=>[t(S,null,{default:e(()=>[o("Natijalar")]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Test nomi: "+n(r.value.test.name),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>{var s;return[o("Talaba: "+n((s=r.value.student)==null?void 0:s.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Boshlandi: "+n(N(r.value.start_time)),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Tugadi: "+n(N(r.value.end_time)),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("To'gri: "+n(r.value.rate)+" / "+n(p.value.length),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[o("Foiz: "+n(parseFloat(r.value.rate*100/p.value.length).toFixed(1))+" %",1)]),_:1}),t(I,null,{default:e(()=>[t(U),t(z,{variant:"tonal",color:"#00da85",onClick:d[0]||(d[0]=s=>G())},{default:e(()=>[o("Ortga qaytish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(l(),f(V,{key:2},{default:e(()=>[t(h,{cols:"12"},{default:e(()=>[t(L,{elevation:"1",color:"red",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[X]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{ae as default};
