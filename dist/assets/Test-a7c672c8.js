import{r as b,q as G,g as H,u as I,s as K,a as r,o,c as f,w as e,h as D,b as t,i as h,j as g,F as x,f as l,d as T,t as n}from"./index-868e85fe.js";import{l as P}from"./index-61c3fb60.js";const W={class:"d-flex",style:{"flex-wrap":"wrap",gap:"10px"}},X=T("div",{class:"d-flex justify-center text-red"},"Ushbu Test Topilmadi!",-1),Z={class:"d-flex justify-center mt-3"},ae={__name:"Test",setup(q){const $=P("/"),v=b([]),w=b(""),c=b(null),R=G();H();const j=R.params.id,C=b("00:00"),A=I();function E(){let u=Math.floor(c.value.exam.time*60-(Date.now()-c.value.start_time)/1e3);function i(a){if(a>0){a--;let p=Math.floor(a/60),m=a%60;C.value=`${p<10?"0"+p:p}:${m<10?"0"+m:m}`,setTimeout(i,1e3,a)}else a<=0&&S()}i(u)}function F(){window.history.back()}const N=async()=>{var i,a;const{data:u}=await D.get(`/test/get/${j}`);c.value=u,u&&((u==null?void 0:u.status)==="start"&&($.emit("push-data",{user:(i=A.getters.user)==null?void 0:i.name,test:(a=c.value.test)==null?void 0:a.name,result:c.value._id,device:(navigator.userAgent||"(Nomalum qurilma)").match(/\([^\)]+\)/)[0],time:new Date().toLocaleString()}),E()),w.value=u.status,v.value=u.questions)},J=async(u,i)=>{C.value!=="00:00"&&await D.put(`/test/upd/${j}/${u}/${i}`)},S=async()=>{await D.put(`/test/finish/${j}`),N(),$.emit("finish-test"),w.value="finish"};return K(()=>{$.emit("finish-test")}),N(),(u,i)=>{const a=r("v-card-text"),p=r("v-radio"),m=r("v-radio-group"),k=r("v-card"),y=r("v-col"),L=r("v-card-title"),Q=r("v-chip"),U=r("v-spacer"),V=r("v-btn"),z=r("v-card-actions"),B=r("v-row"),M=r("v-sheet"),Y=r("v-container");return o(),f(Y,{fluid:""},{default:e(()=>[w.value==="start"?(o(),f(B,{key:0},{default:e(()=>[t(y,{cols:"12",md:"7"},{default:e(()=>[(o(!0),h(x,null,g(v.value,(s,d)=>(o(),f(k,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[l(n(d+1)+". "+n(s.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[t(m,{color:"primary",modelValue:s.selected,"onUpdate:modelValue":_=>s.selected=_,onChange:_=>J(d,s.selected),"hide-details":""},{default:e(()=>[(o(!0),h(x,null,g(s.variants,(_,O)=>(o(),f(p,{key:O,label:_.text,value:_._id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(y,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(k,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(L,null,{default:e(()=>[l("Javoblar")]),_:1}),t(a,{class:"mt-4"},{default:e(()=>[T("div",W,[(o(!0),h(x,null,g(v.value,(s,d)=>(o(),f(Q,{size:"large",key:d,color:s.selected?"primary":"white",variant:"elevated"},{default:e(()=>[l(n(d+1),1)]),_:2},1032,["color"]))),128))])]),_:1}),t(z,{class:"pl-5"},{default:e(()=>[T("span",null,n(C.value),1),t(U),t(V,{variant:"flat",color:"primary",onClick:S},{default:e(()=>[l("Yakunlash")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):w.value==="finish"?(o(),f(B,{key:1},{default:e(()=>[t(y,{cols:"12",md:"7"},{default:e(()=>[(o(!0),h(x,null,g(v.value,(s,d)=>(o(),f(k,{class:"mb-3",color:"surface",key:d},{default:e(()=>[t(a,{class:"pb-0"},{default:e(()=>[l(n(d+1)+". "+n(s.text),1)]),_:2},1024),t(a,{class:"pt-1"},{default:e(()=>[(o(!0),h(x,null,g(s.variants,(_,O)=>(o(),f(M,{width:"100%",rounded:"",class:"my-1 py-1 px-2",color:s.selected===_._id?_.value?"green":"red":"gray"},{default:e(()=>[l(n(_.text),1)]),_:2},1032,["color"]))),256))]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(y,{cols:"12",md:"5",class:"d-flex justify-end align-start"},{default:e(()=>[t(k,{width:"100%",color:"surface",class:"sticky"},{default:e(()=>[t(L,null,{default:e(()=>[l("Natijalar")]),_:1}),t(a,{class:"py-1"},{default:e(()=>[l("Test nomi: "+n(c.value.test.name),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>{var s;return[l("Talaba: "+n((s=c.value.student)==null?void 0:s.name),1)]}),_:1}),t(a,{class:"py-1"},{default:e(()=>[l("Boshlandi: "+n(new Date(c.value.start_time).toLocaleString()),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[l("Tugadi: "+n(new Date(c.value.end_time).toLocaleString()),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[l("To'gri: "+n(c.value.rate)+" / "+n(v.value.length),1)]),_:1}),t(a,{class:"py-1"},{default:e(()=>[l("Foiz: "+n(parseFloat(c.value.rate*100/v.value.length).toFixed(1))+" %",1)]),_:1}),t(z,null,{default:e(()=>[t(U),t(V,{variant:"flat",color:"primary",onClick:i[0]||(i[0]=s=>F())},{default:e(()=>[l("Ortga qaytish")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(o(),f(B,{key:2},{default:e(()=>[t(y,{cols:"12"},{default:e(()=>[t(M,{elevation:"1",color:"surface",width:"100%",class:"pa-2",rounded:""},{default:e(()=>[X,T("div",Z,[t(V,{variant:"flat",color:"primary",onClick:F},{default:e(()=>[l("Ortga Qaytish")]),_:1})])]),_:1})]),_:1})]),_:1}))]),_:1})}}};export{ae as default};
